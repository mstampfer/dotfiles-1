# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# Keycode list
set $q 24
set $w 25
set $e 26
set $r 27
set $t 28
set $y 29
set $u 30
set $i 31
set $o 32
set $p 33
#
set $a 38
set $s 39
set $d 40
set $f 41
set $g 42
set $h 43
set $j 44
set $k 45
set $l 46
#
set $z 52
set $x 53
set $c 54
set $v 55
set $b 56
set $n 57
set $m 58 # Be sure that 'set $mod value' follows this line :)
#

# i3blocks signals
set $sig_vol -RTMIN+10
set $sig_lan -RTMIN+8

set $bin_dir ~/.i3/bin/

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below. ISO 10646 = Unicode
font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, if you need a lot of unicode glyphs or
# right-to-left text rendering, you should instead use pango for rendering and
# chose a FreeType font, such as:
font pango:open Sans Mono 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Use back and forth feature
workspace_auto_back_and_forth yes

# start a terminal
bindsym $mod+Return exec gnome-terminal

# kill focused window
bindcode $mod+Shift+$q kill

# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
bindcode $mod+$d exec $bin_dir/language.sh us && pkill $sig_lan i3blocks && i3-dmenu-desktop

# volume hotkeys
bindsym XF86AudioRaiseVolume exec amixer -q -D default sset Master 5%+ && pkill $sig_vol i3blocks
bindsym XF86AudioLowerVolume exec amixer -q -D default sset Master 5%- && pkill $sig_vol i3blocks
bindsym XF86AudioMute        exec amixer -q -D default sset Master toggle && pkill $sig_vol i3blocks

# scratchpad hotkeys
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# change focus
bindcode $mod+$h focus left
bindcode $mod+$j focus down
bindcode $mod+$k focus up
bindcode $mod+$l focus right

# move focused window
bindcode $mod+Shift+$h move left
bindcode $mod+Shift+$j move down
bindcode $mod+Shift+$k move up
bindcode $mod+Shift+$l move right

# split in horizontal orientation
bindcode $mod+$g split h
# split in vertical orientation
bindcode $mod+$v split v
# enter fullscreen mode for the focused container
bindcode $mod+$f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindcode $mod+$s layout stacking
bindcode $mod+$w layout tabbed
bindcode $mod+$e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindcode $mod+$a focus parent

# hide vertical borders <none|vertical|horizontal|both>
hide_edge_borders both

# window borders <normal|1pixel|none|pixel>
new_window normal
new_float normal

# popups during fullscreen mode <smart|ignore|leave_fullscreen>
popup_during_fullscreen smart

# reload the configuration file
bindcode $mod+Shift+$c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindcode $mod+Shift+$r restart
# exit i3 (logs you out of your X session)
bindcode $mod+Shift+$e exec "i3-nagbar -t warning -m 'Do you really want to exit i3? ' -b 'Yes, exit i3' 'i3-msg exit'"

set $w_term   0:term
set $w_www    1:www
set $w_remote 3:remote

# switch to workspace
bindsym $mod+1 workspace $w_www
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace $w_remote
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace $w_term

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $w_www
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace $w_remote
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace $w_term

# Application specific
assign [class = "Google-chrome"  instance = "Google-chrome"]  → $w_www
assign [class = "Gnome-terminal" instance = "gnome-terminal"] → $w_term
assign [class = "Remmina" instance = "remmina"]               → $w_remote
assign [class = "Skype" instance = "skype"]                   → $w_www

for_window [class = "Skype" instance = "skype"] resize shrink width 30 px or 30 ppt
for_window [class = "Wicd-client.py"] floating enable; floating_maximum_size 30 x 10

# Automatically putting workspaces on specific screens
workspace $w_term   output LVDS1
workspace $w_www    output VGA1
workspace $w_remote output VGA1

# resize window
bindcode $mod+$r mode "resize"

mode "resize" {
  bindcode $h resize shrink width 5 px or 5 ppt
  bindcode $j resize grow height 5 px or 5 ppt
  bindcode $k resize shrink height 5 px or 5 ppt
  bindcode $l resize grow width 5 px or 5 ppt

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# colors
client.focused #d64937 #d64937 #dedede
client.unfocused #333333 #333333 #dedede
client.focused_inactive #333333 #333333 #dedede
client.urgent #383a3b #383a3b #ee0000


# Start i3bar to display a workspace bar (plus the system information i3status
bar {
  font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
  font pango:open Sans Mono 9
  colors {
        background #2d2d2d
        statusline #dedede
        separator #2d2d2d

        focused_workspace  #d64937 #d64937 #dedede
        active_workspace   #2d2d2d #5f676a #dedede
        inactive_workspace #2d2d2d #2d2d2d #888888
        urgent_workspace   #333333 #900000 #ffffff
  }

  workspace_buttons yes
  strip_workspace_numbers yes
  position top
  status_command i3blocks
}

# Controlling system state hotkeys
set $mode_system System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdown
mode "$mode_system" {
  bindcode $l exec --no-startup-id i3exit lock,           mode "default"
  bindcode $e exec --no-startup-id i3exit logout,         mode "default"
  bindcode $s exec --no-startup-id i3exit suspend,        mode "default"
  bindcode $h exec --no-startup-id i3exit hibernate,      mode "default"
  bindcode $r exec --no-startup-id i3exit reboot,         mode "default"
  bindcode Shift+$s exec --no-startup-id i3exit shutdown, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+Pause mode "$mode_system"
bindsym XF86PowerOff   exec --no-startup-id i3exit shutdown
bindsym XF86Calculator exec --no-startup-id gnome-calculator
bindsym XF86AudioPrev  exec --no-startup-id mocp --previous
bindsym XF86AudioPlay  exec --no-startup-id mocp --toggle-pause
bindsym XF86AudioNext  exec --no-startup-id mocp --next
bindsym XF86KbdBrightnessUp   exec xbacklight -inc 10
bindsym XF86KbdBrightnessDown exec xbacklight -dec 10
bindsym Print          exec --no-startup-id scrot 'Screenshot - %Y-%m-%d--%_$wx$h_scrot.png'
bindcode $mod+$p       exec --no-startup-id pcmanfm

set $mode_display Choose display: (1) VGA only (2) VGA left (3) VGA right (4) VGA clone (0) LVDS only
mode "$mode_display" {

  bindsym 1 exec --no-startup-id $bin_dir/display.sh only VGA1, mode "default"
  bindsym 2 exec --no-startup-id $bin_dir/display.sh left VGA1, mode "default"
  bindsym 3 exec --no-startup-id $bin_dir/display.sh right VGA1, mode "default"
  bindsym 4 exec --no-startup-id $bin_dir/display.sh clone VGA1, mode "default"
  bindsym 0 exec --no-startup-id $bin_dir/display.sh only LVDS1, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+F6     mode "$mode_display"; exec --no-startup-id feh --bg-fill $pic
bindsym XF86Display mode "$mode_display"; exec --no-startup-id feh --bg-fill $pic

# Startup settings
exec --no-startup-id syndaemon -i 4 -K -d # fixing touchpad freeze bug
exec --no-startup-id synclient TouchpadOff=1 # Use trackpoint only

# Language support.
exec_always --no-startup-id $bin_dir/language.sh us && pkill $sig_lan i3blocks
bindcode 66 exec --no-startup-id $bin_dir/language.sh us && pkill $sig_lan i3blocks
bindcode $mod+$u exec --no-startup-id $bin_dir/language.sh ua && pkill $sig_lan i3blocks

# Startup applications
exec --no-startup-id wicd-client --tray
exec --no-startup-id gnome-terminal

# Background
exec --no-startup-id feh --bg-fill ~/.wallpaper
